---
layout:     post
title:      Linux命令行与shell编程
subtitle:   个人向的知识备忘录
date:       2025-06-20
author:     John Young
header-img: img/tag-bg-o.jpg
catalog: true
tags:
    - Linux
    - Shell
---

## 前言

最近因为需要两地跑，工作环境于是变成了两套：windows & Mac。其中我对mac系统其实非常陌生，于是决定积极探索mac系统下的工作流。unity在mac下除了ide与我之前使用的visual studio不同，使用的是rider，其他的其实体验上差不太多。
但是我对于unix命令行以及shell编程涉及的不多，因此读了一下《Linux命令行与shell脚本编程大全》这部书，这里记录一下我个人需要备忘的东西。

### 1. 常用shell指令

- ```man```：manual, 用于查看指令的详细用法，相当于shell的内置文档
- ```ls```：list，列出工作目录下的文件。-F区分文件与目录；-a显示所有文件（包括隐藏文件）；-R会遍历子目录；-l显示长列表，文件详细信息；ls + 参数即可过滤，支持正则表达式，例如：
  * ```ls f*ll```
  * ```ls f[a-z]ll```
- ```pwd```：present working directory，当前工作目录。
- ```touch```：创建空文件，或者更新文件时间戳
- ```cp```：copy, 复制文件。 -i进行文件覆盖前的询问；-R递归拷贝目录；cp也可以使用正则通配符
- ```ln```：link，软链接或硬链接一个文件。-s创建软链接，软连接类似于windows的快捷方式，是一个独立的文件，有自己的inode编号，硬链接本质上与原文件是同一个文件，二者的inode编号是一致的。硬链接只能在同一磁盘，且不能是目录，只能是文件。
- ```mv```：move，移动或者重命名文件/目录。
- ```rm```：remove，删除文件。-i给予询问；-f强制删除无询问；-r递归删除子文件，再删除目录本身。
- ```rmdir```：删除空文件夹
- ```mkdir```：创建空文件夹。-p选项可以创建深层目录，例如：
  * ```mkdir -p Dir1/Dir2/Dir3```
- ```file```：查看文件类型
- ```cat```：查看文本文件所有内容。-n添加行号。
- ```more/less```：通过分页工具查看文本文件内容
- ```tail```：查看文本文件末尾，默认10行；-n指定显示行数；-f可以一直刷新，在显示日志输出的时候很好用
- ```head```：和tail类似，但查看的是文件前n行的内容

### 2. 更多shell指令

- ```ps```：progress，查看进程情况。-e显示所有进程；-f显示更多信息
- ```top```：相较于ps指令只能显示某一时刻的进程情况，top会运行实时程序监测进程。-o可以根据一个主键进行排序，也可以在运行时按o健重新指定主键。常见用法：
  * ```top -o mem```: 根据内存使用情况排序
  * ```top -o cpu```: 根据cpu使用情况排序
- ```kill/pkill```：kill根据pid给程序发送终止信号，-s支持发送其他信号；pkill则是以程序名代替pid的kill。
- ```mount/umount```：用于挂载/卸载储存设备（u盘等）
- ```df```：display free space，显示磁盘的使用情况
- ```du```：disk usage，显示某个目录下所有文件、目录的磁盘占用情况。-h以人类可读方式；-d指定深度（只显示多少层子目录）。例如如下指令可以显示当前目录占用空间最大的10个文件夹：
  * ```du . | sort -nr  | head -10```
- ```sort```：文本排序功能。默认是以字符串进行升序排序。-n视为数字进行排序；-r进行逆序排列；对于按字段分割的文本，-t指定文件分割符后，可以用-k指定排序字段。例如：
  * ```sort -t ':' -k 3 -n /etc/passwd```：按照用户id对/ect/passwd进行排序
- ```grep```：global regular expression，使用正则表达式进行数据搜索。-n显示匹配行号；-v进行反向搜索；-e指定多个匹配模式；-c输出匹配的数量而非内容。
  * ```grep '^_s' /etc/passwd -c```：输出/etc/passwd中所有以'_s'为开头的行的数量
 - ```zip```：数据压缩。-r递归包含目录的子文件，否则只会添加目录到压缩文件；-m完成后删除原文件；-e添加压缩密码，可以用-p在命令里指定；-q不显示压缩状态
 - ```unzip```：解压缩；-d指定解压目录（否则是pwd）